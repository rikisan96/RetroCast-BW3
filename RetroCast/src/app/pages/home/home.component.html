<!-- home.component.html -->
<div class="container">
  <div class="personal-p mb-4">
    <nav class="navbar bg-transparent justify-content-center">
      <img
        src="../../../assets/imgs/retrocast-logo-zip-file/png/logo-no-background.png"
        alt="imgLogo"
        class="w-25 mb-5"
      />
      <form class="container-fluid justify-content-center gap-4">
        <a
          class="text-decoration-none personal-font fs-6"
          (click)="showForm('platform')"
          [ngClass]="{ 'active-link': activeFilter === 'platform' }"
          type="button"
          >Platform</a
        >
        <a
          class="text-decoration-none personal-font fs-6"
          (click)="showForm('year')"
          [ngClass]="{ 'active-link': activeFilter === 'year' }"
          type="button"
          >Year</a
        >
        <a
          class="text-decoration-none personal-font fs-6"
          (click)="showForm('genre')"
          [ngClass]="{ 'active-link': activeFilter === 'genre' }"
          type="button"
          >Genre</a
        >
      </form>
    </nav>
    <section
      class="d-flex flex-column justify-content-center align-items-center my-5"
    >
      <h1 class="personal-fontDue">RetroCast story:</h1>
      <p class="personal-fontTre mt-4 p-2">
        Esplora l'affascinante mondo dei giochi vintage su RetroGames Haven, il
        tuo portale definitivo per rivivere le emozioni dei giochi del passato.
        Dalle leggendarie console degli anni '80 e '90 ai classici arcade che
        hanno definito un'epoca, qui troverai tutto ci√≤ che riguarda il gaming
        nostalgico. Scopri recensioni dettagliate, storie dei giochi che hanno
        fatto la storia e guide su come restaurare e mantenere le tue vecchie
        console. Unisciti alla nostra community di appassionati per condividere
        ricordi e scoprire gemme nascoste che hanno segnato l'infanzia di tanti.
        Rivivi il passato, gioca al presente e colleziona per il futuro con
        RetroGames Haven!
      </p>
    </section>
  </div>

  <div class="mb-4">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      (input)="filterByName()"
      placeholder="Search by name"
      class="form-control input-personal w-25"
    />
  </div>

  <div *ngIf="activeFilter === 'platform'" class="filter-form mb-2">
    <h3 class="text-light personal-fontQuattro">Filter by Platform</h3>
    <button
      class="btn btn-outline-light my-1 me-1"
      (click)="filterByPlatform('Windows XP')"
      type="button"
      [ngClass]="{ 'active-button': selectedPlatform === 'Windows XP' }"
    >
      Windows XP
    </button>
    <button
      class="btn btn-outline-light my-1 me-1"
      (click)="filterByPlatform('Windows Vista')"
      type="button"
      [ngClass]="{ 'active-button': selectedPlatform === 'Windows Vista' }"
    >
      Windows Vista
    </button>
    <button
      class="btn btn-outline-light my-1 me-1"
      (click)="filterByPlatform('Windows 7')"
      type="button"
      [ngClass]="{ 'active-button': selectedPlatform === 'Windows 7' }"
    >
      Windows 7
    </button>
    <button
      class="btn btn-outline-light my-1 me-1"
      type="button"
      (click)="hideForm()"
    >
      Close
    </button>
    <button
      class="btn btn-outline-light my-1 me-1"
      type="button"
      (click)="showAllGames()"
    >
      Show All
    </button>
  </div>

  <div *ngIf="activeFilter === 'year'" class="filter-form mb-2">
    <h3 class="text-light personal-fontQuattro">Filter by Year</h3>
    <button
      class="btn btn-outline-light my-1 me-1"
      (click)="filterByYear(1997, 1999)"
      type="button"
    >
      1997-1999
    </button>
    <button
      class="btn btn-outline-light my-1 me-1"
      (click)="filterByYear(2000, 2005)"
      type="button"
    >
      2000-2005
    </button>
    <button
      class="btn btn-outline-light my-1 me-1"
      (click)="filterByYear(2005, 2010)"
      type="button"
    >
      2005-2010
    </button>
    <button
      class="btn btn-outline-light my-1 me-1"
      (click)="filterByYear(2010, 2015)"
      type="button"
    >
      2010-2015
    </button>
    <button
      class="btn btn-outline-light my-1 me-1"
      type="button"
      (click)="hideForm()"
    >
      Close
    </button>
    <button
      class="btn btn-outline-light my-1 me-1"
      type="button"
      (click)="showAllGames()"
    >
      Show All
    </button>
  </div>

  <div *ngIf="activeFilter === 'genre'" class="filter-form mb-2">
    <h3 class="text-light personal-fontQuattro">Filter by Genre</h3>
    <button
      class="btn btn-outline-light my-1 me-1"
      (click)="filterByGenre('Action RPG')"
      type="button"
      [ngClass]="{ 'active-button': selectedGenre === 'Action RPG' }"
    >
      Action RPG
    </button>
    <button
      class="btn btn-outline-light my-1 me-1"
      (click)="filterByGenre('First-Person Shooter')"
      type="button"
      [ngClass]="{ 'active-button': selectedGenre === 'First-Person Shooter' }"
    >
      First-Person Shooter
    </button>
    <button
      class="btn btn-outline-light my-1 me-1"
      (click)="filterByGenre('Action-Adventure')"
      type="button"
      [ngClass]="{ 'active-button': selectedGenre === 'Action-Adventure' }"
    >
      Action-Adventure
    </button>
    <button
      class="btn btn-outline-light my-1 me-1"
      (click)="filterByGenre('Real-Time Strategy')"
      type="button"
      [ngClass]="{ 'active-button': selectedGenre === 'Real-Time Strategy' }"
    >
      Real-Time Strategy
    </button>
    <button
      class="btn btn-outline-light my-1 me-1"
      type="button"
      (click)="hideForm()"
    >
      Close
    </button>
    <button
      class="btn btn-outline-light my-1 me-1"
      type="button"
      (click)="showAllGames()"
    >
      Show All
    </button>
  </div>

  <div class="row justify-content-center">
    <div
      class="card mb-3 me-2"
      style="max-width: 540px"
      *ngFor="let game of filteredGameList"
    >
      <div class="row pt-3">
        <div class="col-md-4">
          <img [src]="game.gameImg" class="img-fluid rounded-start" alt="" />
        </div>
        <div class="col-md-8">
          <div class="card-body">
            <h5 class="card-title">{{ game.Title }}</h5>
            <p class="card-text">{{ game.plot | slice : 0 : 20 }}...</p>
            <p class="card-text">
              {{ game.sysRequirement | slice : 0 : 20 }}...
            </p>
            <p class="card-text">{{ game.year }}</p>
            <button class="btn btn-primary me-2">{{ game.genre }}</button>
            <button class="btn btn-secondary me-2" (click)="addToCart(game)">
              {{ game.price | currency }}
            </button>
            <button class="btn btn-success me-2">{{ game.gameVote }}</button>
            <button class="btn btn-info me-2" (click)="viewGameDetails(game)">
              View Game
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Add the modal -->
<div
  class="modal fade"
  id="gameDetailsModal"
  tabindex="-1"
  aria-labelledby="gameDetailsModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered modal-lg retro-modal">
    <div class="modal-content retro-modal-content">
      <div class="modal-header retro-modal-header">
        <h5 class="modal-title retro-modal-title" id="gameDetailsModalLabel">
          Game Details
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body retro-modal-body">
        <img [src]="selectedGame?.gameImg" class="img-fluid mb-3" alt="" />
        <h3>Plot</h3>
        <p>{{ selectedGame?.plot }}</p>
        <hr />
        <h4>System requirements:</h4>
        <p>{{ selectedGame?.sysRequirement }}</p>
        <hr />
        <div class="d-flex align-items-center gap-3">
          <div class="d-flex align-items-start gap-2">
            <h4>Year:</h4>
            <p class="fs-5">{{ selectedGame?.year }}</p>
          </div>
          <div class="d-flex align-items-start gap-2">
            <h4>Genre:</h4>
            <p class="fs-5">{{ selectedGame?.genre }}</p>
          </div>
        </div>
        <div class="d-flex">
          <p class="fs-6">{{ selectedGame?.price | currency }} |</p>
          <div class="d-flex gap-3 align-items-start fs-6">
            <i class="bi bi-star-fill"></i>
            <p>{{ selectedGame?.gameVote }}</p>
          </div>
        </div>

        <div class="modal-footer retro-modal-footer border-0">
          <button
            type="button"
            class="btn btn-info retro-modal-button"
            data-bs-dismiss="modal"
          >
            Close
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
